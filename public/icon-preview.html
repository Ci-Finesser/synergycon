<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA Icon Preview</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
      color: #333;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 3rem;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 2rem;
    }

    h1 {
      font-size: 2.5rem;
      color: #667eea;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: #666;
      font-size: 1.1rem;
    }

    .theme-toggle {
      margin: 2rem 0;
      text-align: center;
    }

    .theme-buttons {
      display: inline-flex;
      gap: 0.5rem;
      background: #f5f5f5;
      padding: 0.25rem;
      border-radius: 8px;
    }

    .theme-btn {
      padding: 0.5rem 1.5rem;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 6px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .theme-btn.active {
      background: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .icons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .icon-card {
      background: #f9f9f9;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 2px solid transparent;
    }

    .icon-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      border-color: #667eea;
    }

    .icon-preview {
      width: 100%;
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      border-radius: 8px;
      margin-bottom: 1rem;
      position: relative;
      overflow: hidden;
    }

    .icon-preview.dark {
      background: #1a1a1a;
    }

    .icon-preview img {
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
    }

    .maskable-overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      display: none;
    }

    .show-overlay .maskable-overlay {
      display: block;
    }

    .maskable-overlay::before {
      content: '';
      position: absolute;
      inset: 10%;
      border: 2px dashed rgba(255, 59, 48, 0.5);
      border-radius: 4px;
      background: rgba(255, 59, 48, 0.1);
    }

    .icon-info {
      margin-top: 1rem;
    }

    .icon-name {
      font-weight: 600;
      color: #333;
      margin-bottom: 0.5rem;
    }

    .icon-size {
      color: #666;
      font-size: 0.9rem;
    }

    .icon-purpose {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: #667eea;
      color: white;
      border-radius: 12px;
      font-size: 0.75rem;
      margin-top: 0.5rem;
    }

    .maskable-badge {
      background: #ff3b30;
    }

    .section-title {
      font-size: 1.75rem;
      color: #333;
      margin: 2rem 0 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #e0e0e0;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .control-btn {
      padding: 0.75rem 1.5rem;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 2rem 0;
    }

    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 0.25rem;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      margin: 2rem 0;
    }

    .info-box h3 {
      color: #1976d2;
      margin-bottom: 0.5rem;
    }

    .info-box p {
      color: #555;
      line-height: 1.6;
    }

    footer {
      text-align: center;
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 2px solid #e0e0e0;
      color: #666;
    }

    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }

      .container {
        padding: 1.5rem;
      }

      h1 {
        font-size: 1.75rem;
      }

      .icons-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üé® PWA Icon Preview</h1>
      <p class="subtitle">Preview and test all generated PWA icons</p>
    </header>

    <div class="stats" id="stats">
      <div class="stat-card">
        <div class="stat-value" id="totalIcons">0</div>
        <div class="stat-label">Total Icons</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalSize">0</div>
        <div class="stat-label">Total Size (KB)</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="maskableCount">0</div>
        <div class="stat-label">Maskable Icons</div>
      </div>
    </div>

    <div class="controls">
      <div class="theme-toggle">
        <div class="theme-buttons">
          <button class="theme-btn active" onclick="setTheme('light')">‚òÄÔ∏è Light</button>
          <button class="theme-btn" onclick="setTheme('dark')">üåô Dark</button>
        </div>
      </div>
      <button class="control-btn" onclick="toggleMaskableOverlay()">
        <span id="overlayText">Show Safe Zones</span>
      </button>
      <button class="control-btn" onclick="downloadAll()">
        üì• Download Report
      </button>
    </div>

    <div class="info-box">
      <h3>üí° What are Maskable Icons?</h3>
      <p>
        Maskable icons include a 10% safe zone on all sides to ensure the icon looks good when masked 
        into different shapes (circle, squircle, etc.) on Android devices. The red dashed border shows 
        the safe zone boundaries when enabled.
      </p>
    </div>

    <section>
      <h2 class="section-title">PWA Icons</h2>
      <div class="icons-grid" id="pwaIcons"></div>
    </section>

    <section>
      <h2 class="section-title">Additional Icons</h2>
      <div class="icons-grid" id="additionalIcons"></div>
    </section>

    <footer>
      <p>Generated by PWA Setup Script v2.0.0</p>
      <p>Last generated: <span id="timestamp"></span></p>
    </footer>
  </div>

  <script>
    const pwaIcons = [
      { src: '/icon-72x72.png', size: '72x72', purpose: 'any' },
      { src: '/icon-96x96.png', size: '96x96', purpose: 'any' },
      { src: '/icon-128x128.png', size: '128x128', purpose: 'any' },
      { src: '/icon-144x144.png', size: '144x144', purpose: 'any' },
      { src: '/icon-152x152.png', size: '152x152', purpose: 'any' },
      { src: '/icon-192x192.png', size: '192x192', purpose: 'any maskable' },
      { src: '/icon-384x384.png', size: '384x384', purpose: 'any maskable' },
      { src: '/icon-512x512.png', size: '512x512', purpose: 'any maskable' },
    ]

    const additionalIcons = [
      { src: '/favicon.png', size: '32x32', purpose: 'favicon' },
      { src: '/apple-touch-icon.png', size: '180x180', purpose: 'apple' },
    ]

    let currentTheme = 'light'
    let showOverlay = false

    function createIconCard(icon) {
      const isMaskable = icon.purpose.includes('maskable')
      return `
        <div class="icon-card">
          <div class="icon-preview ${currentTheme === 'dark' ? 'dark' : ''}" data-maskable="${isMaskable}">
            <img src="${icon.src}" alt="${icon.size}" loading="lazy" onerror="this.parentElement.innerHTML='<p>Failed to load</p>'">
            ${isMaskable ? '<div class="maskable-overlay"></div>' : ''}
          </div>
          <div class="icon-info">
            <div class="icon-name">${icon.src.split('/').pop()}</div>
            <div class="icon-size">${icon.size}</div>
            <span class="icon-purpose ${isMaskable ? 'maskable-badge' : ''}">${icon.purpose}</span>
          </div>
        </div>
      `
    }

    function renderIcons() {
      document.getElementById('pwaIcons').innerHTML = pwaIcons.map(createIconCard).join('')
      document.getElementById('additionalIcons').innerHTML = additionalIcons.map(createIconCard).join('')
    }

    function setTheme(theme) {
      currentTheme = theme
      document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'))
      event.target.classList.add('active')
      document.querySelectorAll('.icon-preview').forEach(preview => {
        if (theme === 'dark') {
          preview.classList.add('dark')
        } else {
          preview.classList.remove('dark')
        }
      })
    }

    function toggleMaskableOverlay() {
      showOverlay = !showOverlay
      const overlayText = document.getElementById('overlayText')
      document.querySelectorAll('.icon-card').forEach(card => {
        if (showOverlay) {
          card.classList.add('show-overlay')
          overlayText.textContent = 'Hide Safe Zones'
        } else {
          card.classList.remove('show-overlay')
          overlayText.textContent = 'Show Safe Zones'
        }
      })
    }

    async function calculateStats() {
      let totalSize = 0
      let loadedIcons = 0
      const maskableCount = pwaIcons.filter(icon => icon.purpose.includes('maskable')).length

      // Note: File size calculation via JavaScript is limited
      // This is a simplified version
      for (const icon of [...pwaIcons, ...additionalIcons]) {
        try {
          const response = await fetch(icon.src)
          if (response.ok) {
            const blob = await response.blob()
            totalSize += blob.size
            loadedIcons++
          }
        } catch (e) {
          console.warn('Failed to load', icon.src)
        }
      }

      document.getElementById('totalIcons').textContent = loadedIcons
      document.getElementById('totalSize').textContent = (totalSize / 1024).toFixed(2)
      document.getElementById('maskableCount').textContent = maskableCount
    }

    function downloadAll() {
      const report = {
        timestamp: new Date().toISOString(),
        pwaIcons: pwaIcons,
        additionalIcons: additionalIcons,
        stats: {
          totalIcons: document.getElementById('totalIcons').textContent,
          totalSize: document.getElementById('totalSize').textContent + ' KB',
          maskableCount: document.getElementById('maskableCount').textContent
        }
      }

      const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' })
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url
      a.download = `pwa-icons-report-${Date.now()}.json`
      a.click()
      URL.revokeObjectURL(url)
    }

    // Initialize
    document.getElementById('timestamp').textContent = new Date().toLocaleString()
    renderIcons()
    calculateStats()
  </script>
</body>
</html>
